<div class="container pt-5 pb-5">
    <h5 class="mb-0 d-flex align-items-center">
        <span class="material-symbols-rounded filled fs-2 me-3">calendar_month</span>
        Mis Reservas
    </h5>
    <hr />

    @if (bookings && bookings.length > 0) {
    <div class="card-body">
        <div class="table-responsive">
            <table class="table align-middle table-striped table-hover mb-0">
                <thead class="text-center">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Alojamiento</th>
                        <th scope="col">Imagen</th>
                        <th scope="col">Ubicación</th>
                        <th scope="col">Fechas</th>
                        <th scope="col">Huéspedes</th>
                        <th scope="col">Precio Total</th>
                        <th scope="col">Estado</th>
                        <th scope="col" class="text-center">Acciones</th>
                    </tr>
                </thead>

                <tbody class="table-group-divider">
                    @for (booking of bookings; track $index) {
                    <tr>
                        <td class="text-muted text-center">{{ booking.id }}</td>
                        <td class="text-center">{{ booking.guests }}</td>
                        <td class="text-center">
                            <span class="badge" [ngClass]="getStatusBadgeClass(booking.status)">
                                {{ getStatusText(booking.status) }}
                            </span>
                        </td>
                        <td class="text-center">
                            @if (booking.status !== 'CANCELLED') {
                            <button (click)="onCancel(booking.id)" type="button"
                                class="btn btn-outline-warning btn-icon me-1" title="Cancelar reserva">
                                <span class="material-symbols-rounded">cancel</span>
                            </button>
                            }
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    } @else {
    <!-- Mensaje cuando no hay reservas -->
    <div class="text-center py-5">
        <span class="material-symbols-rounded text-muted" style="font-size: 4rem;">event_busy</span>
        <h4 class="mt-3 text-muted">No tienes reservas</h4>
        <p class="text-muted">Explora alojamientos y haz tu primera reserva</p>
        <button routerLink="/" class="btn btn-primary mt-3">
            <span class="material-symbols-rounded align-middle me-1">search</span>
            Buscar alojamientos
        </button>
    </div>
    }
</div>
